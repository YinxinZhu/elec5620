{% extends 'base.html' %}
{% block title %}{{ _('Student Dashboard') }}{% endblock %}
{% block content %}
<h1 class="h4 mb-4">{{ _('Learner Dashboard') }}</h1>
<p class="text-muted">{{ _('Welcome back, {name}. Track your bookings and latest practice progress below.').format(name=current_user.name) }}</p>

<section class="mb-5">
  <h2 class="h5">{{ _('Upcoming sessions') }}</h2>
  {% if upcoming_appointments %}
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th scope="col">{{ _('Start') }}</th>
          <th scope="col">{{ _('Coach') }}</th>
          <th scope="col">{{ _('Location') }}</th>
          <th scope="col">{{ _('Status') }}</th>
        </tr>
      </thead>
      <tbody>
        {% for appointment in upcoming_appointments %}
        <tr>
          <td>{{ appointment.slot.start_time.strftime('%d %b %Y %H:%M') }}</td>
          <td>{{ appointment.slot.coach.name }}</td>
          <td>{{ appointment.slot.location_text }}</td>
          <td class="text-capitalize">{{ appointment.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info" role="alert">
    {{ _('You have no upcoming sessions booked. Check with your coach to schedule one.') }}
  </div>
  {% endif %}
</section>

<section>
  <h2 class="h5">{{ _('Recent practice summary') }}</h2>
  {% if latest_summary %}
  <p class="mb-1">{{ _('Last mock exam score:') }} <strong>{{ latest_summary.score }}%</strong></p>
  <p class="text-muted">{{ _('Attempted on {date}.').format(date=latest_summary.taken_at.strftime('%d %b %Y')) }}</p>
  {% else %}
  <div class="alert alert-secondary" role="alert">
    {{ _('Complete a mock exam in the learner app to see your progress here.') }}
  </div>
  {% endif %}
</section>
{% endblock %}
